#!/bin/sh
#
# STARSpan project
# Carlos A. Rueda
# starspan - launcher script
# NOTE: Adjust as necessary for your environment
# $Id$
#

BINDIR=`dirname $0`
JARS=$BINDIR/jars/
STARSPAN2=$BINDIR/starspan2

if [ "`uname -n`" == "px" ]; then
	# my machine :-)
	export LD_LIBRARY_PATH=$BINDIR/../lib:/usr/local/lib:$LD_LIBRARY_PATH
else
	# cstars machines
	export LD_LIBRARY_PATH=/proj/delta/delta_2004/code/starspan/usr_local/lib

	#export LD_LIBRARY_PATH=/net/scratch_ceres/PAVO/lib:/usr/local/lib:$LD_LIBRARY_PATH
	#STARSPAN2=$BINDIR/starspan2-scorpio
fi

function usage() {
	cat << EOF

starspan extended usage:

    starspan --test args...
        launches the JTS Test Runner
        Typically this is called:
            starspan --test -files a_test.xml
        where a_test.xml was generated by "starspan -jtstest a_test.xml ..."
            
    starspan --jts
        launches the JTS Test Builder as a way to visualize the
        geometries involved in tests.
        Choose "File->Open XML file(s)..." to open an .xml file
        generated by "starspan -jtstest ..."

EOF
	return;
}

if [ "$1" == "-xhelp" ]; then
	usage
	exit

elif [ "$1" == "--test" ]; then
	echo "[Launching JTS TopologyTestApp...]"
	shift
	CP=$CLASSPATH
	for i in $JARS/*.jar; do CP=$i:$CP; done
	java -Xmx256m -cp $CP com.vividsolutions.jtstest.testrunner.TopologyTestApp $*

elif [ "$1" == "--jts" ]; then
	echo "[Launching JTSTestBuilder...]"
	shift
	CP=$CLASSPATH
	for i in $JARS/*.jar; do CP=$i:$CP; done
	java -Xmx256m -cp $CP com.vividsolutions.jtstest.testbuilder.JTSTestBuilder $*

elif [ "$1" == "--view_geometries" ]; then
	echo "[Launching ptplot...]"
	shift
	CP=$CLASSPATH
	CP=$JARS/plotapplication.jar:$CP
	java -Xmx256m -cp $CP ptolemy.plot.PlotApplication $*

else
	# call starspan2
	$STARSPAN2 $*
fi

